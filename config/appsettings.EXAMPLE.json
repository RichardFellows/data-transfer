{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "DataTransfer Configuration - Copy this file to appsettings.json and customize for your environment",

  "connections": {
    // ============================================================================
    // CONNECTION STRINGS - Choose the format that matches your SQL Server setup
    // ============================================================================

    // OPTION 1: Windows Authentication (recommended for local development)
    // Works when running on Windows domain with SQL Server access
    "source": "Server=localhost;Database=YOUR_SOURCE_DB;Integrated Security=true;TrustServerCertificate=true",
    "destination": "Server=localhost;Database=YOUR_DEST_DB;Integrated Security=true;TrustServerCertificate=true",

    // OPTION 2: SQL Server Authentication (for remote servers or Docker)
    // Replace: YOUR_SERVER, YOUR_PORT, YOUR_USER, YOUR_PASSWORD, YOUR_DATABASE
    // "source": "Server=YOUR_SERVER,YOUR_PORT;Database=YOUR_SOURCE_DB;User Id=YOUR_USER;Password=YOUR_PASSWORD;TrustServerCertificate=true",
    // "destination": "Server=YOUR_SERVER,YOUR_PORT;Database=YOUR_DEST_DB;User Id=YOUR_USER;Password=YOUR_PASSWORD;TrustServerCertificate=true",

    // OPTION 3: Docker SQL Server (using demo setup)
    // If you ran ./demo/00-setup-sqlserver-docker.sh, use these:
    // "source": "Server=localhost,1433;Database=SalesSource;User Id=sa;Password=YourStrong@Passw0rd;TrustServerCertificate=true",
    // "destination": "Server=localhost,1433;Database=SalesDestination;User Id=sa;Password=YourStrong@Passw0rd;TrustServerCertificate=true",

    // OPTION 4: Azure SQL Database
    // "source": "Server=tcp:yourserver.database.windows.net,1433;Database=YOUR_DB;User Id=YOUR_USER@yourserver;Password=YOUR_PASSWORD;Encrypt=True;",
    // "destination": "Server=tcp:yourserver.database.windows.net,1433;Database=YOUR_DB;User Id=YOUR_USER@yourserver;Password=YOUR_PASSWORD;Encrypt=True;"
  },

  "storage": {
    // ============================================================================
    // STORAGE PATH - Where Parquet/Iceberg files will be stored
    // ============================================================================

    // RELATIVE PATH (recommended for development - creates folder in project directory)
    "basePath": "./parquet-output",

    // ABSOLUTE PATHS (for production or specific locations):
    // Windows: "C:\\data\\parquet" or "D:\\transfers\\parquet"
    // Linux: "/data/parquet" or "/mnt/storage/parquet"
    // Docker: "/parquet-output" (must be mounted as volume)

    // COMPRESSION - Options: "snappy" (default), "gzip", "none"
    "compression": "snappy"
  },

  "tables": [
    // ============================================================================
    // TABLE CONFIGURATIONS - Define which tables to transfer
    // ============================================================================

    // EXAMPLE 1: DATE PARTITIONING (for transactional tables with DATE/DATETIME columns)
    {
      "source": {
        "database": "YOUR_SOURCE_DB",      // Must match connection string database
        "schema": "dbo",                   // Usually "dbo" in SQL Server
        "table": "Orders"                  // Your table name
      },
      "destination": {
        "database": "YOUR_DEST_DB",        // Must match connection string database
        "schema": "dbo",
        "table": "Orders"                  // Can be same or different name
      },
      "partitioning": {
        "type": "date",                    // Partition by DATE/DATETIME column
        "column": "OrderDate"              // Column name containing dates
      },
      "extractSettings": {
        "dateRange": {
          "startDate": "2024-01-01",       // ISO format: YYYY-MM-DD
          "endDate": "2024-12-31"          // Inclusive
        },
        "batchSize": 100000                // Rows per batch (default: 100000)
      }
    },

    // EXAMPLE 2: INTEGER DATE PARTITIONING (for tables with YYYYMMDD integer columns)
    {
      "source": {
        "database": "YOUR_SOURCE_DB",
        "schema": "dbo",
        "table": "SalesTransactions"
      },
      "destination": {
        "database": "YOUR_DEST_DB",
        "schema": "dbo",
        "table": "SalesTransactions"
      },
      "partitioning": {
        "type": "int_date",                // Partition by integer date (e.g., 20240101)
        "column": "SaleDate"               // Column containing integer dates
      },
      "extractSettings": {
        "dateRange": {
          "startDate": "2024-01-01",       // Will be converted to 20240101
          "endDate": "2024-12-31"          // Will be converted to 20241231
        },
        "batchSize": 50000
      }
    },

    // EXAMPLE 3: STATIC TABLES (reference/lookup tables without partitioning)
    {
      "source": {
        "database": "YOUR_SOURCE_DB",
        "schema": "dbo",
        "table": "Products"
      },
      "destination": {
        "database": "YOUR_DEST_DB",
        "schema": "dbo",
        "table": "Products"
      },
      "partitioning": {
        "type": "static"                   // No partitioning - single extraction
      },
      "extractSettings": {
        "batchSize": 10000                 // Smaller batch for reference tables
      }
    },

    // EXAMPLE 4: SCD2 (Slowly Changing Dimension Type 2)
    {
      "source": {
        "database": "YOUR_SOURCE_DB",
        "schema": "dbo",
        "table": "CustomerDimension"
      },
      "destination": {
        "database": "YOUR_DEST_DB",
        "schema": "dbo",
        "table": "CustomerDimension"
      },
      "partitioning": {
        "type": "scd2",                    // SCD2 with effective/expiration dates
        "column": "EffectiveDate",         // When record became active
        "scdEffectiveDateColumn": "EffectiveDate",
        "scdExpirationDateColumn": "ExpirationDate"  // NULL = currently active
      },
      "extractSettings": {
        "dateRange": {
          "startDate": "2024-01-01",
          "endDate": "2024-12-31"
        },
        "batchSize": 5000
      }
    }
  ],

  "logging": {
    // ============================================================================
    // LOGGING CONFIGURATION (optional)
    // ============================================================================
    "logLevel": "Information",             // Options: Verbose, Debug, Information, Warning, Error
    "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
  },

  // ============================================================================
  // NOTES FOR NEW USERS
  // ============================================================================
  //
  // 1. CHOOSE YOUR PARTITION TYPE:
  //    - "date" → If you have DATE/DATETIME columns
  //    - "int_date" → If you have integer dates (YYYYMMDD like 20240115)
  //    - "static" → For small reference tables (<100K rows, no time component)
  //    - "scd2" → For dimension tables with effective/expiration dates
  //
  // 2. VERIFY YOUR DATABASES EXIST:
  //    Run in SQL Server: SELECT name FROM sys.databases
  //
  // 3. ENSURE WRITE PERMISSIONS:
  //    - Windows: Check folder permissions (user needs write access)
  //    - Linux: sudo chown -R $USER:$USER /data/parquet
  //    - Docker: Use volume mounts (-v /host/path:/container/path)
  //
  // 4. TEST YOUR CONNECTION STRINGS:
  //    sqlcmd -S "localhost" -U "sa" -P "password" -Q "SELECT @@VERSION"
  //
  // 5. REMOVE COMMENTS FOR VALID JSON:
  //    JSON doesn't support comments. This is an annotated example.
  //    Copy to appsettings.json and remove all // comments.
  //
  // ============================================================================
}
